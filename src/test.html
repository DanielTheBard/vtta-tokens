<html>
<head>
<style>
  #stage { padding: 10px; background-color: gray;  }
</style>
</head>
<body>
<canvas id="stage" width="400" height="400"></canvas>
<canvas id="brush" width="20" height="20"></canvas> 
<input id="inputSize" type="number" name="size" value="10" min="1" max="40"></input>

<script>
   const MAX_WIDTH = 40;
   const canvas = document.getElementById("stage");
   const ctx = canvas.getContext('2d');
   const brush = document.getElementById("brush");
   brush.width = MAX_WIDTH; brush.height = MAX_WIDTH;



   const updateBrush = (width) => {
        width = width < 0 ? 1 : width > MAX_WIDTH ? MAX_WIDTH : width;

   	
  	const bctx = brush.getContext('2d');
bctx.clearRect(0, 0, MAX_WIDTH  , MAX_WIDTH  );
   	var grd=ctx.createRadialGradient(MAX_WIDTH  / 2, MAX_WIDTH  / 2, 0, MAX_WIDTH  / 2, MAX_WIDTH  / 2, (width)   / 2);
   	grd.addColorStop(0,"rgba(0, 0, 0, 1)");
        const STOP_PERCENTAGE =50;
        const stop = STOP_PERCENTAGE / 100; // * MAX_WIDTH;
        console.log("width: " + width + ", stop: " + stop);
   	grd.addColorStop(stop,"rgba(0, 0, 0, 0.9)");
   	grd.addColorStop(1,"rgba(0, 0, 0, 0)");
   	bctx.fillStyle = grd;
   	bctx.arc(MAX_WIDTH  / 2, MAX_WIDTH  / 2, width / 2, 0, 2* Math.PI);
   	bctx.fill();

/*

	MAX_WIDTH     80/100
 	---------  = --------
           1.00          x

	brush.width = MAX_WIDTH; brush.height = MAX_WIDTH;
  	const bctx = brush.getContext('2d');
   	var grd=ctx.createRadialGradient(MAX_WIDTH  / 2, MAX_WIDTH  / 2, 0,MAX_WIDTH  / 2, MAX_WIDTH  / 2, MAX_WIDTH  / 2);
   	grd.addColorStop(0,"rgba(0, 0, 0, 1)");
   	grd.addColorStop(0.5,"rgba(0, 0, 0, 0.9)");
   	grd.addColorStop(1,"rgba(0, 0, 0, 0)");
   	bctx.fillStyle = grd;
   	bctx.arc(MAX_WIDTH  / 2, MAX_WIDTH  / 2, MAX_WIDTH  / 2, 0, 2* Math.PI);
   	bctx.fill();
*/
   }

updateBrush(20);

   let isDrawing = false;   
   canvas.addEventListener('mousedown', (event) => {
	isDrawing = true;
        const pos = { x: event.clientX, y: event.clientY };
        ctx.drawImage(brush, 0, 0, MAX_WIDTH , MAX_WIDTH , pos.x - MAX_WIDTH  / 2, pos.y -MAX_WIDTH  / 2, 20, 20); 
   });

   canvas.addEventListener('mouseup', (event) => {
    	isDrawing = false;
   });

   canvas.addEventListener('mousemove',  (event) => {
      if (!isDrawing) return;
      const pos = { x: event.clientX, y: event.clientY };
      ctx.drawImage(brush, 0, 0, MAX_WIDTH , MAX_WIDTH , pos.x - MAX_WIDTH  / 2, pos.y -MAX_WIDTH  / 2, 20, 20);     
   });

   const inputSize = document.getElementById('inputSize');
   inputSize.addEventListener('change', (event) => updateBrush(parseInt(event.target.value)));
inputSize.addEventListener('input', (event) => updateBrush(parseInt(event.target.value)));

</script>
</body>
</html>